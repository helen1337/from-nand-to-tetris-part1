(WAIT)
@KBD
D=M
@WHITE
D;JEQ
@BLACK
D;JNE

(WHITE)
@now
MD=0
@prev
D=D-M
M=0
@WAIT
D;JEQ
@CLEAR
D;JNE

(BLACK)
@now
M=0
MD=!M
@prev
D=D-M
M=0
M=!M
@WAIT
D;JEQ
@FILL
D;JNE

(CLEAR)
@8191
D=A
(LOOP)
@i
M=D
@SCREEN
AD=D+A
M=0
@i
D=M
@WAIT
D;JEQ
@i
MD=M-1
@LOOP
0;JMP

(FILL)
@8191
D=A
(LOOOP)
@i
M=D
@SCREEN
AD=D+A
M=0
M=!M
@i
D=M
@WAIT
D;JEQ
@i
MD=M-1
@LOOOP
0;JMP